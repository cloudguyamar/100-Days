üöÄ Day 1 of 100 Days challange: Mastering Linux User Security
üéØ Challenge: 100 Days  with KodeKloud

üñ•Ô∏è Server Details 

Server Name	IP	Hostname	User	Password	Purpose
stapp01	172.16.*.*	stapp01.stratos.xfusioncorp.com	tony	I**nMn	Nautilus App 1
stapp02	172.16.*.*	stapp02.stratos.xfusioncorp.com	steve	A**ric	Nautilus App 2

üìã Lab Overview
To accommodate the backup agent tool's specifications, the system admin team at xFusionCorp Industries requires the creation of a user with a non-interactive shell. Here's your task:

Create a user named kareem with a non-interactive shell on App Server 1.
Note: You can find the infrastructure details by clicking on the Details of all Users and Servers button on the top-right section of the page.

üîß Step-by-Step Solution
Step 1: Connect to App Server 1
# SSH into App Server 1 (stapp01 - Nautilus App 1)
ssh tony@stapp01.stratos.xfusioncorp.com
# OR using IP address
ssh tony@stapp01.stratos.xfusioncorp.com

# Enter password when prompted: I**nMn
Step 2: Switch to Root User
# Switch to root for user management operations
sudo su -
Step 3: Create User with Non-Interactive Shell
# Create user 'kareem' with /sbin/nologin as shell
useradd -s /sbin/nologin kareem
Alternative command options:

# Option 1: Using /bin/false as non-interactive shell
useradd -s /bin/false kareem

# Option 2: Using /usr/sbin/nologin (on some systems)
useradd -s /usr/sbin/nologin kareem
Step 4: Verify User Creation
# Check if user was created successfully
id kareem

# Verify the shell assignment
grep kareem /etc/passwd

# Check user's home directory
ls -la /home/ | grep kareem
‚úÖ Validation Steps
‚úÖ User javed created successfully
‚úÖ User has non-interactive shell (/sbin/nologin)
‚úÖ User entry exists in /etc/passwd
‚úÖ User cannot login interactively

Lab performed

thor@jumphost ~$ useradd kareem
useradd: Permission denied.
useradd: cannot lock /etc/passwd; try again later.
thor@jumphost ~$ sudo su -
 
We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:
 
    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.
 
[sudo] password for thor: 
sudo: a password is required
thor@jumphost ~$ ssh thor@App Server 1
ssh: connect to host app port 22: Connection refused

thor@jumphost ~$ ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 172.16.238.3  netmask 255.255.255.0  broadcast 172.16.238.255
        ether 02:42:ac:10:ee:03  txqueuelen 0  (Ethernet)
        RX packets 12  bytes 976 (976.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 172.16.239.3  netmask 255.255.255.0  broadcast 172.16.239.255
        ether 02:42:ac:10:ef:03  txqueuelen 0  (Ethernet)
        RX packets 11  bytes 866 (866.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
eth2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 172.17.0.8  netmask 255.255.0.0  broadcast 172.17.255.255
        ether 02:42:ac:11:00:08  txqueuelen 0  (Ethernet)
        RX packets 325  bytes 40799 (39.8 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 237  bytes 196030 (191.4 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 8  bytes 665 (665.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 665 (665.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
thor@jumphost ~$ hostname
jumphost.stratos.xfusioncorp.com
thor@jumphost ~$ ssh tony@jumphost.stratos.xfusioncorp.com
The authenticity of host 'jumphost.stratos.xfusioncorp.com (172.16.*.*)' can't be established.
ED25519 key fingerprint is SHA256:gTo1087T3tLtWrFrPTfFR228wtSx9f6ManjawAYT96E.
[tony@stapp01 ~]$ sudo su -
 
We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:
 
    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.
 
[sudo] password for tony: 
[root@stapp01 ~]# useradd -s /sbin/nologin kareem
[root@stapp01 ~]# id kareem
uid=1002(kareem) gid=1002(kareem) groups=1002(kareem)
[root@stapp01 ~]# grep kareem /etc/passwd
kareem:x:1002:1002::/home/kareem:/sbin/nologin
[root@stapp01 ~]# ls -la /home/ | grep kareem
drwx------ 2 kareem  kareem  4096 Oct 22 17:28 kareem
[root@stapp01 ~]# 



Explanation:

üí° First, what‚Äôs a ‚Äúshell‚Äù?
 
A shell is a program that lets you talk to your computer by typing commands instead of clicking buttons.
For example, when you open a Terminal or Command Prompt, that‚Äôs a shell.
 
 
---
 
üßç ‚ÄúInteractive shell user‚Äù
 
An interactive shell is when you are actively using the terminal ‚Äî typing commands, seeing results, typing the next command, etc.
 
Example:
 
You open Terminal.
 
You type ls to list files.
 
You type cd Documents.
 
The computer waits for your next command.
 
 
‚úÖ That‚Äôs interactive ‚Äî you and the shell are having a ‚Äúconversation.‚Äù
 
 
---
 
ü§ñ ‚ÄúNon-interactive shell user‚Äù
 
A non-interactive shell is when no person is typing commands directly.
Instead, commands are run automatically ‚Äî by a script, program, or system task.
 
Example:
 
You have a script called backup.sh that copies your files every night at 2 AM.
 
The computer runs that script automatically.
 
Nobody is there typing commands ‚Äî it just runs and exits.
 
 
‚úÖ That‚Äôs a non-interactive shell ‚Äî it‚Äôs working without human interaction.
 
 
---
 
üîç In short:
 
Type Who‚Äôs typing? Example
 
Interactive shell You (a human) Typing commands in Terminal
Non-interactive shell A script/program Nightly backup script running automatically

We don‚Äôt create anything in /sbin.
We‚Äôre just telling Linux to use a special shell program that already lives there ‚Äî like /usr/sbin/nologin ‚Äî when we create a non-interactive user.
 
 
---
 
üß† Detailed Explanation
 
1Ô∏è‚É£ What /usr/sbin/nologin actually is
 
/usr/sbin/nologin is a program (a small executable file) that simply says:
 
> ‚ÄúThis account is not available for interactive login.‚Äù
 
 
 
So when a user with /usr/sbin/nologin tries to log in (e.g., via SSH or terminal), Linux runs this program instead of giving them a shell like /bin/bash.
It immediately exits with a message like:
 
This account is currently not available.
 
 
---
 
2Ô∏è‚É£ Why it‚Äôs in /usr/sbin/
 
Historically:
 
/bin/ ‚Üí contains essential programs for all users
 
/sbin/ ‚Üí contains system binaries, mostly used by system administrators (root)
 
/usr/sbin/ ‚Üí non-essential system management tools
 
 
So /usr/sbin/nologin lives there because:
 
It‚Äôs a system-level utility (not something a regular user needs)
 
It‚Äôs mainly used by administrators to control login behavior
 
 
 
---
 
3Ô∏è‚É£ What happens when you assign it as a shell
 
When you create a user like this:
 
sudo useradd -s /usr/sbin/nologin backupuser
 
You‚Äôre not placing the user ‚Äúin‚Äù /sbin.
You‚Äôre just telling the system:
 
> ‚ÄúWhen backupuser logs in, instead of starting Bash or Sh, run /usr/sbin/nologin.‚Äù
 
 
 
That makes the user non-interactive ‚Äî they exist, but can‚Äôt open a shell session.
 
 
---
 
4Ô∏è‚É£ Alternative shells for similar behavior
 
You could also use:
 
/sbin/nologin (on some distros)
 
/bin/false (older method ‚Äî simply exits immediately)
 
 
Example:
 
sudo useradd -s /bin/false backupuser
 
This also blocks login, but /usr/sbin/nologin is preferred because it gives a clearer message.
 
 
---
 
‚úÖ Summary
 
Path Purpose Behavior
 
/bin/bash Normal user shell Allows login & interaction
/usr/sbin/nologin System utility Blocks login, shows message
/bin/false Basic command Blocks login silently
